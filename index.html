<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>NiceCalc Pro — Dark Mode</title>
<style>
/* ====== Dark Mode Styling ====== */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');

:root{
  --bg-0: #061019;
  --bg-1: #071424;
  --panel: rgba(255,255,255,0.03);
  --accent-a: #00d2ff;
  --accent-b: #7b61ff;
  --text-main: #e6eef8;
  --muted: rgba(230,238,248,0.55);
  --danger: #ff6b6b;
  --key-shadow: rgba(2,6,23,0.6);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:'Inter',sans-serif;
  background: linear-gradient(180deg,var(--bg-0),var(--bg-1));
  display:flex;
  justify-content:center;
  align-items:center;
  color:var(--text-main);
}

/* Calculator wrapper */
.calculator{
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border-radius:14px;
  padding:15px;
  box-shadow: 0 10px 30px rgba(2,6,23,0.7);
  border: 1px solid rgba(255,255,255,0.04);
  width: 300px;
}

/* Header */
.calc-header h1{
  font-size:16px;
  text-align:center;
  margin:0 0 10px;
}

/* Display */
.display{
  background: var(--panel);
  border-radius:10px;
  padding:10px;
  margin-bottom:12px;
}
.expression{
  color:var(--muted);
  font-size:12px;
  text-align:right;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.result{
  font-size:26px;
  font-weight:600;
  text-align:right;
  transition: transform .16s cubic-bezier(.2,.9,.2,1);
}

/* Keys grid */
.keys{
  display:grid;
  grid-template-columns: repeat(4, 1fr);
  gap:8px;
}
.key{
  width:100%;
  aspect-ratio:1/1;
  min-height:45px;
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius:10px;
  border:none;
  background: linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01));
  color:var(--text-main);
  font-size:15px;
  cursor:pointer;
  box-shadow: 0 6px 14px var(--key-shadow);
  position:relative;
  overflow:hidden;
}
.key-op{ background: linear-gradient(180deg, rgba(0,210,255,0.08), rgba(123,97,255,0.05)); font-weight:600; }
.key-ac{ background: linear-gradient(180deg, rgba(255,107,107,0.08), rgba(255,107,107,0.03)); color:var(--danger); font-weight:600; }
.key-equal{ background: linear-gradient(90deg,var(--accent-a),var(--accent-b)); color:#021022; font-weight:700; font-size:17px; }
.key:hover{ transform: translateY(-3px); }
.key:active{ transform: translateY(0px) scale(.97); }

/* Ripple animation */
.ripple {
  position:absolute;
  border-radius:50%;
  transform:scale(0);
  background:rgba(255,255,255,0.15);
  animation:ripple .5s ease-out;
}
@keyframes ripple {
  to { transform:scale(2.5); opacity:0; }
}

/* Footer */
.calc-footer{ text-align:center; color:var(--muted); font-size:11px; margin-top:6px }
</style>
</head>
<body>

<div class="calculator">
  <header class="calc-header">
    <h1>NiceCalc Pro</h1>
  </header>
  <div class="display">
    <div class="expression" id="exp"></div>
    <div class="result" id="res">0</div>
  </div>
  <div class="keys">
    <button class="key key-ac" data-action="clear">AC</button>
    <button class="key" data-action="delete">DEL</button>
    <button class="key" data-value="%">%</button>
    <button class="key key-op" data-value="/">÷</button>

    <button class="key" data-value="7">7</button>
    <button class="key" data-value="8">8</button>
    <button class="key" data-value="9">9</button>
    <button class="key key-op" data-value="*">×</button>

    <button class="key" data-value="4">4</button>
    <button class="key" data-value="5">5</button>
    <button class="key" data-value="6">6</button>
    <button class="key key-op" data-value="-">−</button>

    <button class="key" data-value="1">1</button>
    <button class="key" data-value="2">2</button>
    <button class="key" data-value="3">3</button>
    <button class="key key-op" data-value="+">+</button>

    <button class="key" data-value="00">00</button>
    <button class="key" data-value="0">0</button>
    <button class="key" data-value=".">.</button>
    <button class="key key-equal" data-action="equals">=</button>
  </div>
  <footer class="calc-footer">Keyboard: Enter(=), Backspace(DEL)</footer>
</div>

<script>
const expEl = document.getElementById('exp');
const resEl = document.getElementById('res');
const keys = document.querySelectorAll('.key');

let expression = '';
let justEvaluated = false;

function transformExpression(exp) {
  return exp.replace(/×/g,'*').replace(/÷/g,'/').replace(/(\d+)%/g,'($1/100)');
}
function safeEval(exp) {
  return Function('"use strict";return ('+transformExpression(exp)+')')();
}
function render() {
  expEl.textContent = expression;
  try {
    if(expression) resEl.textContent = safeEval(expression);
    else resEl.textContent = '0';
  } catch {
    resEl.textContent = 'Err';
  }
}
function push(val) {
  if(justEvaluated && /[0-9.]/.test(val)){ expression=''; justEvaluated=false; }
  if(val==='.' && /\.\d*$/.test(expression.split(/[\+\-\*\/]/).pop())) return;
  expression += val;
  render();
}
function clearAll(){ expression=''; render(); }
function del(){ expression=expression.slice(0,-1); render(); }
function compute(){
  try{ expression = String(safeEval(expression)); justEvaluated=true; render(); }
  catch{ resEl.textContent='Err'; }
}
function ripple(e,el){
  const r=document.createElement('span');
  r.className='ripple';
  const rect=el.getBoundingClientRect();
  const size=Math.max(rect.width,rect.height)*1.4;
  r.style.width=r.style.height=size+'px';
  r.style.left=(e.clientX-rect.left-size/2)+'px';
  r.style.top=(e.clientY-rect.top-size/2)+'px';
  el.appendChild(r);
  setTimeout(()=>r.remove(),500);
}
keys.forEach(k=>{
  k.addEventListener('click',e=>{
    ripple(e,k);
    const v=k.dataset.value;
    const a=k.dataset.action;
    if(a==='clear') return clearAll();
    if(a==='delete') return del();
    if(a==='equals') return compute();
    if(v) push(v);
  });
});
window.addEventListener('keydown',e=>{
  if(/[0-9+\-*/.%]/.test(e.key)) push(e.key);
  else if(e.key==='Enter') compute();
  else if(e.key==='Backspace') del();
  else if(e.key==='Escape') clearAll();
});
render();
</script>

</body>
</html>
